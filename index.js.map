{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst apiKey = '44261766-43e443b40d02cd3bf18e38bdd';\n\nexport async function fetchImages(searchQuery, page = 1) {\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`\n    );\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while receiving images!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    console.error(error);\n\n    document.querySelector('input').value = '';\n    const spinner = document.querySelector('.loader');\n    if (spinner) {\n      spinner.remove();\n    }\n  }\n}\n","export function renderSearchForm() {\n  const searchForm = document.createElement('form');\n  searchForm.classList.add('search-form');\n\n  const searchInput = document.createElement('input');\n  searchInput.classList.add('search-input');\n  searchInput.type = 'text';\n  searchInput.id = 'search-input';\n  searchInput.placeholder = 'Image Search...';\n\n  const searchButton = document.createElement('button');\n  searchButton.classList.add('search-button');\n  searchButton.type = 'submit';\n  searchButton.textContent = 'Search';\n\n  searchForm.appendChild(searchInput);\n  searchForm.appendChild(searchButton);\n\n  return searchForm;\n}\nexport function renderImageGallery(images) {\n  return images.map(image => {\n    const imageCard = document.createElement('a');\n    imageCard.href = image.largeImageURL;\n    imageCard.classList.add('image-card');\n    const imageElement = document.createElement('img');\n    imageElement.src = image.webformatURL;\n    imageElement.alt = image.tags;\n    imageCard.appendChild(imageElement);\n    const info = document.createElement('div');\n    info.classList.add('info');\n    const likes = document.createElement('p');\n    likes.textContent = `Likes ${image.likes}`;\n    info.appendChild(likes);\n    const views = document.createElement('p');\n    views.textContent = `Views ${image.views}`;\n    info.appendChild(views);\n    const comments = document.createElement('p');\n    comments.textContent = `Comments ${image.comments}`;\n    info.appendChild(comments);\n    const downloads = document.createElement('p');\n    downloads.textContent = `Downloads ${image.downloads}`;\n    info.appendChild(downloads);\n    imageCard.appendChild(info);\n    return imageCard;\n  });\n}\n\nexport function renderImageCard(image) {\n  const imageCard = document.createElement('div');\n  imageCard.classList.add('image-card');\n\n  const imageElement = document.createElement('img');\n  imageElement.src = image.webformatURL;\n  imageElement.alt = image.tags;\n  imageElement.dataset.largeImageURL = image.largeImageURL;\n\n  const info = document.createElement('div');\n  info.classList.add('info');\n\n  const likes = document.createElement('p');\n  likes.classList.add('likes');\n  likes.textContent = `Likes ${image.likes}`;\n\n  const views = document.createElement('p');\n  views.classList.add('views');\n  views.textContent = `Views ${image.views}`;\n\n  const comments = document.createElement('p');\n  comments.classList.add('comments');\n  comments.textContent = `Comments ${image.comments}`;\n\n  const downloads = document.createElement('p');\n  downloads.classList.add('downloads');\n  downloads.textContent = `Downloads ${image.downloads}`;\n\n  info.appendChild(likes);\n  info.appendChild(views);\n  info.appendChild(comments);\n  info.appendChild(downloads);\n\n  imageCard.appendChild(imageElement);\n  imageCard.appendChild(info);\n\n  return imageCard;\n}\n\nexport function renderLoadMoreButton() {\n  const loadMoreButton = document.createElement('button');\n  loadMoreButton.classList.add('search-button');\n  loadMoreButton.textContent = 'Load more';\n  loadMoreButton.disabled = true;\n  return loadMoreButton;\n}\n\nexport function renderLoader() {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  return loader;\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  renderSearchForm,\n  renderImageGallery,\n  renderLoadMoreButton,\n  renderLoader,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst main = document.querySelector('main');\n\nconst searchForm = renderSearchForm();\nmain.appendChild(searchForm);\n\nconst gallery = document.createElement('div');\ngallery.classList.add('gallery');\nmain.appendChild(gallery);\n\nconst loadMoreButton = renderLoadMoreButton();\nmain.appendChild(loadMoreButton);\nloadMoreButton.style.display = 'none';\n\nconst loader = renderLoader();\nmain.appendChild(loader);\nloader.style.display = 'none';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n});\n\nlet currentPage = 1;\nlet searchQueryGlobal = '';\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  loader.style.display = 'block';\n  const searchQuery = document.querySelector('#search-input').value.trim();\n  if (searchQuery === '') {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter your search query!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n  loadMoreButton.disabled = true;\n  searchQueryGlobal = searchQuery;\n  const images = await fetchImages(searchQuery, currentPage);\n  const imageGallery = renderImageGallery(images.hits);\n  imageGallery.forEach(imageCard => {\n    gallery.appendChild(imageCard);\n  });\n\n  if (images.hits.length === 0) {\n    iziToast.error({\n      title: 'No results',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    loadMoreButton.style.display = 'none';\n    loader.style.display = 'none';\n  } else {\n    if (images.totalHits <= currentPage * 15) {\n      loadMoreButton.style.display = 'none';\n      loader.style.display = 'none';\n      document.querySelector('#search-input').value = '';\n      const messageContainer = document.createElement('div');\n      messageContainer.classList.add('end-of-results-message');\n      const message = document.createElement('p');\n      message.textContent =\n        \"We're sorry, but you've reached the end of search results.\";\n      messageContainer.appendChild(message);\n      gallery.appendChild(messageContainer);\n      lightbox.refresh();\n      return;\n    }\n    loadMoreButton.disabled = images.hits.length < 15;\n    if (images.hits.length > 0) {\n      loadMoreButton.style.display = 'block';\n      loader.style.display = 'none';\n    }\n  }\n  document.querySelector('#search-input').value = '';\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  currentPage++;\n  const images = await fetchImages(searchQueryGlobal, currentPage);\n  const imageGallery = renderImageGallery(images.hits);\n  imageGallery.forEach(imageCard => {\n    gallery.appendChild(imageCard);\n  });\n  const imageCard = gallery.children[0];\n  const imageCardHeight = imageCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: imageCardHeight * 2,\n    behavior: 'smooth',\n  });\n  lightbox.refresh();\n  loader.style.display = 'none';\n  loadMoreButton.disabled = images.hits.length < 15;\n  if (images.hits.length === 0) {\n    loadMoreButton.style.display = 'none';\n  }\n  if (images.totalHits <= currentPage * 15) {\n    loadMoreButton.style.display = 'none';\n    loader.style.display = 'none';\n    const messageContainer = document.createElement('div');\n    messageContainer.classList = 'end-of-results-message';\n    const message = document.createElement('p');\n    message.textContent =\n      \"We're sorry, but you've reached the end of search results.\";\n    messageContainer.appendChild(message);\n    gallery.appendChild(messageContainer);\n  }\n});\n"],"names":["apiKey","fetchImages","searchQuery","page","axios","error","iziToast","spinner","renderSearchForm","searchForm","searchInput","searchButton","renderImageGallery","images","image","imageCard","imageElement","info","likes","views","comments","downloads","renderLoadMoreButton","loadMoreButton","renderLoader","loader","main","gallery","lightbox","SimpleLightbox","currentPage","searchQueryGlobal","event","messageContainer","message","imageCardHeight"],"mappings":"owBAIA,MAAMA,EAAS,qCAER,eAAeC,EAAYC,EAAaC,EAAO,EAAG,CACvD,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAC3B,gCAAgCJ,CAAM,MAAME,CAAW,6EAA6EC,CAAI,EAC9I,GACoB,IACjB,OAAQE,EAAO,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gCACT,SAAU,WACV,QAAS,GACf,CAAK,EACD,QAAQ,MAAMD,CAAK,EAEnB,SAAS,cAAc,OAAO,EAAE,MAAQ,GACxC,MAAME,EAAU,SAAS,cAAc,SAAS,EAC5CA,GACFA,EAAQ,OAAM,CAEjB,CACH,CC3BO,SAASC,GAAmB,CACjC,MAAMC,EAAa,SAAS,cAAc,MAAM,EAChDA,EAAW,UAAU,IAAI,aAAa,EAEtC,MAAMC,EAAc,SAAS,cAAc,OAAO,EAClDA,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,KAAO,OACnBA,EAAY,GAAK,eACjBA,EAAY,YAAc,kBAE1B,MAAMC,EAAe,SAAS,cAAc,QAAQ,EACpD,OAAAA,EAAa,UAAU,IAAI,eAAe,EAC1CA,EAAa,KAAO,SACpBA,EAAa,YAAc,SAE3BF,EAAW,YAAYC,CAAW,EAClCD,EAAW,YAAYE,CAAY,EAE5BF,CACT,CACO,SAASG,EAAmBC,EAAQ,CACzC,OAAOA,EAAO,IAAIC,GAAS,CACzB,MAAMC,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,KAAOD,EAAM,cACvBC,EAAU,UAAU,IAAI,YAAY,EACpC,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,IAAMF,EAAM,aACzBE,EAAa,IAAMF,EAAM,KACzBC,EAAU,YAAYC,CAAY,EAClC,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,MAAM,EACzB,MAAMC,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,YAAc,SAASJ,EAAM,KAAK,GACxCG,EAAK,YAAYC,CAAK,EACtB,MAAMC,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,YAAc,SAASL,EAAM,KAAK,GACxCG,EAAK,YAAYE,CAAK,EACtB,MAAMC,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,YAAc,YAAYN,EAAM,QAAQ,GACjDG,EAAK,YAAYG,CAAQ,EACzB,MAAMC,EAAY,SAAS,cAAc,GAAG,EAC5C,OAAAA,EAAU,YAAc,aAAaP,EAAM,SAAS,GACpDG,EAAK,YAAYI,CAAS,EAC1BN,EAAU,YAAYE,CAAI,EACnBF,CACX,CAAG,CACH,CAyCO,SAASO,GAAuB,CACrC,MAAMC,EAAiB,SAAS,cAAc,QAAQ,EACtD,OAAAA,EAAe,UAAU,IAAI,eAAe,EAC5CA,EAAe,YAAc,YAC7BA,EAAe,SAAW,GACnBA,CACT,CAEO,SAASC,GAAe,CAC7B,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5C,OAAAA,EAAO,UAAU,IAAI,QAAQ,EACtBA,CACT,CCvFA,MAAMC,EAAO,SAAS,cAAc,MAAM,EAEpCjB,EAAaD,EAAgB,EACnCkB,EAAK,YAAYjB,CAAU,EAE3B,MAAMkB,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAU,IAAI,SAAS,EAC/BD,EAAK,YAAYC,CAAO,EAExB,MAAMJ,EAAiBD,EAAoB,EAC3CI,EAAK,YAAYH,CAAc,EAC/BA,EAAe,MAAM,QAAU,OAE/B,MAAME,EAASD,EAAY,EAC3BE,EAAK,YAAYD,CAAM,EACvBA,EAAO,MAAM,QAAU,OAEvB,MAAMG,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,EACZ,CAAC,EAED,IAAIC,EAAc,EACdC,EAAoB,GAExBtB,EAAW,iBAAiB,SAAU,MAAMuB,GAAS,CACnDA,EAAM,eAAc,EACpBP,EAAO,MAAM,QAAU,QACvB,MAAMvB,EAAc,SAAS,cAAc,eAAe,EAAE,MAAM,OAClE,GAAIA,IAAgB,GAAI,CACtBuB,EAAO,MAAM,QAAU,OACvBnB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kCACT,SAAU,WACV,QAAS,GACf,CAAK,EACD,MACD,CAEDwB,EAAc,EACdH,EAAQ,UAAY,GACpBJ,EAAe,MAAM,QAAU,OAC/BA,EAAe,SAAW,GAC1BQ,EAAoB7B,EACpB,MAAMW,EAAS,MAAMZ,EAAYC,EAAa4B,CAAW,EAMzD,GALqBlB,EAAmBC,EAAO,IAAI,EACtC,QAAQE,GAAa,CAChCY,EAAQ,YAAYZ,CAAS,CACjC,CAAG,EAEGF,EAAO,KAAK,SAAW,EACzBP,EAAS,MAAM,CACb,MAAO,aACP,QACE,2EACF,SAAU,WACV,QAAS,GACf,CAAK,EACDiB,EAAe,MAAM,QAAU,OAC/BE,EAAO,MAAM,QAAU,WAClB,CACL,GAAIZ,EAAO,WAAaiB,EAAc,GAAI,CACxCP,EAAe,MAAM,QAAU,OAC/BE,EAAO,MAAM,QAAU,OACvB,SAAS,cAAc,eAAe,EAAE,MAAQ,GAChD,MAAMQ,EAAmB,SAAS,cAAc,KAAK,EACrDA,EAAiB,UAAU,IAAI,wBAAwB,EACvD,MAAMC,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YACN,6DACFD,EAAiB,YAAYC,CAAO,EACpCP,EAAQ,YAAYM,CAAgB,EACpCL,EAAS,QAAO,EAChB,MACD,CACDL,EAAe,SAAWV,EAAO,KAAK,OAAS,GAC3CA,EAAO,KAAK,OAAS,IACvBU,EAAe,MAAM,QAAU,QAC/BE,EAAO,MAAM,QAAU,OAE1B,CACD,SAAS,cAAc,eAAe,EAAE,MAAQ,EAClD,CAAC,EAEDF,EAAe,iBAAiB,QAAS,SAAY,CACnDE,EAAO,MAAM,QAAU,QACvBK,IACA,MAAMjB,EAAS,MAAMZ,EAAY8B,EAAmBD,CAAW,EAC1ClB,EAAmBC,EAAO,IAAI,EACtC,QAAQE,GAAa,CAChCY,EAAQ,YAAYZ,CAAS,CACjC,CAAG,EAED,MAAMoB,EADYR,EAAQ,SAAS,CAAC,EACF,sBAAqB,EAAG,OAW1D,GAVA,OAAO,SAAS,CACd,IAAKQ,EAAkB,EACvB,SAAU,QACd,CAAG,EACDP,EAAS,QAAO,EAChBH,EAAO,MAAM,QAAU,OACvBF,EAAe,SAAWV,EAAO,KAAK,OAAS,GAC3CA,EAAO,KAAK,SAAW,IACzBU,EAAe,MAAM,QAAU,QAE7BV,EAAO,WAAaiB,EAAc,GAAI,CACxCP,EAAe,MAAM,QAAU,OAC/BE,EAAO,MAAM,QAAU,OACvB,MAAMQ,EAAmB,SAAS,cAAc,KAAK,EACrDA,EAAiB,UAAY,yBAC7B,MAAMC,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YACN,6DACFD,EAAiB,YAAYC,CAAO,EACpCP,EAAQ,YAAYM,CAAgB,CACrC,CACH,CAAC"}